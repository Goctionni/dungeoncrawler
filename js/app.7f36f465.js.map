{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/Editor/Map.vue?1fb0","webpack:///./src/components/Viewer/Preview.vue?a9cf","webpack:///./src/components/Viewer/Controls.vue?baf5","webpack:///./src/App.vue?c650","webpack:///./src/components/Editor/Editor.vue?f81c","webpack:///./src/components/Viewer/GameView.vue?2b4d","webpack:///./src/components/Editor/Sidebar.vue?a55e","webpack:///./src/components/Viewer/MiniMap.vue?abf4","webpack:///./src/components/Dialog/Prompt.vue?3498","webpack:///./src/components/Editor/TextureEditor.vue?95d7","webpack:///./src/components/Dialog/Dialog.vue?eb1f","webpack:///./src/components/ProjectManager/ProjectManager.vue?947d","webpack:///./src/App.vue?34a7","webpack:///./src/components/Editor/Editor.vue?b619","webpack:///./src/types/Map.types.ts","webpack:///./src/util.ts","webpack:///./src/components/Editor/Map.vue?d4f5","webpack:///./src/components/Editor/Map.vue","webpack:///./src/components/Editor/Map.vue?2de7","webpack:///./src/components/Editor/Map.vue?0093","webpack:///./src/components/Editor/Sidebar.vue?ead6","webpack:///./src/components/Dialog/Alert.vue?e462","webpack:///./src/components/Dialog/Dialog.vue?8e37","webpack:///./src/components/Dialog/Dialog.vue","webpack:///./src/components/Dialog/Dialog.vue?0360","webpack:///./src/components/Dialog/Dialog.vue?822e","webpack:///./src/components/Dialog/Alert.vue","webpack:///./src/components/Dialog/Alert.vue?6fe7","webpack:///./src/components/Dialog/Alert.vue?f15f","webpack:///./src/components/Dialog/Confirm.vue?015c","webpack:///./src/components/Dialog/Confirm.vue","webpack:///./src/components/Dialog/Confirm.vue?7d61","webpack:///./src/components/Dialog/Confirm.vue?c062","webpack:///./src/components/Dialog/Prompt.vue?d711","webpack:///./src/components/Dialog/Prompt.vue","webpack:///./src/components/Dialog/Prompt.vue?3181","webpack:///./src/components/Dialog/Prompt.vue?b9e4","webpack:///./src/components/Dialog/dialogs.ts","webpack:///./src/components/Editor/TextureEditor.vue?4ab9","webpack:///./src/components/Editor/TextureEditor.vue","webpack:///./src/components/Editor/TextureEditor.vue?5856","webpack:///./src/components/Editor/TextureEditor.vue?71e3","webpack:///./src/components/Editor/Sidebar.vue","webpack:///./src/components/Editor/Sidebar.vue?5c97","webpack:///./src/components/Editor/Sidebar.vue?45bd","webpack:///./src/components/Editor/Editor.vue","webpack:///./src/components/Editor/Editor.vue?66e4","webpack:///./src/components/Editor/Editor.vue?033e","webpack:///./src/components/Viewer/Preview.vue?d869","webpack:///./src/components/Viewer/MiniMap.vue?93d0","webpack:///./src/components/Viewer/MiniMap.vue","webpack:///./src/components/Viewer/MiniMap.vue?1d74","webpack:///./src/components/Viewer/MiniMap.vue?f0b6","webpack:///./src/util/map-helper.ts","webpack:///./src/components/Viewer/GameView.vue?bfee","webpack:///./src/components/Viewer/GameView.vue","webpack:///./src/components/Viewer/GameView.vue?65b8","webpack:///./src/components/Viewer/GameView.vue?d565","webpack:///./src/components/Viewer/Controls.vue?a714","webpack:///./src/components/Viewer/Controls.vue","webpack:///./src/components/Viewer/Controls.vue?921f","webpack:///./src/components/Viewer/Controls.vue?bf0a","webpack:///./src/components/Viewer/Preview.vue","webpack:///./src/components/Viewer/Preview.vue?e623","webpack:///./src/components/Viewer/Preview.vue?e4f2","webpack:///./src/components/ProjectManager/ProjectManager.vue?f5fc","webpack:///./src/data/defaultTextures.ts","webpack:///./src/data/defaultMap.ts","webpack:///./src/store.ts","webpack:///./src/components/ProjectManager/ProjectManager.vue","webpack:///./src/components/ProjectManager/ProjectManager.vue?f3ac","webpack:///./src/components/ProjectManager/ProjectManager.vue?75a3","webpack:///./src/components/MapPicker/MapPicker.vue?b590","webpack:///./src/components/MapPicker/MapPicker.vue","webpack:///./src/components/MapPicker/MapPicker.vue?8ba9","webpack:///./src/components/MapPicker/MapPicker.vue?3208","webpack:///./src/util/texture-helper.ts","webpack:///./src/App.vue","webpack:///./src/App.vue?0ab4","webpack:///./src/App.vue?bff9","webpack:///./src/main.ts","webpack:///./src/components/MapPicker/MapPicker.vue?6b6a","webpack:///./src/App.vue?3565"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","jsonpScriptSrc","p","exports","module","l","e","promises","installedChunkData","promise","Promise","resolve","reject","onScriptComplete","script","document","createElement","charset","timeout","nc","setAttribute","src","error","Error","event","onerror","onload","clearTimeout","chunk","errorType","type","realSrc","target","message","name","request","undefined","setTimeout","head","appendChild","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","err","console","jsonpArray","window","oldJsonpFunction","slice","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","state","class","active","attrs","domProps","_s","on","$event","project","saveProject","downloadFiles","closeProject","_e","setProject","setMap","staticRenderFns","rows","activeTool","activeTexture","mapViewMode","startTile","updateTile","setStart","textures","tools","mapSize","map","start","facing","setMapSize","saveTexture","removeTextureByName","setStartFacing","createEmptyTile","x","y","floor","north","east","south","west","faces","style","_l","row","tile","_obj","isStartTile","mouseEnter","mouseLeave","face","hover","keydownHandler","tileWithHover","filter","tool","clear","$emit","preventDefault","addEventListener","removeEventListener","component","editingTexture","directives","rawName","expression","composing","mapSizeXModel","mapSizeYModel","_q","mapViewModeModel","faceTooltip","setTool","keyBindings","startFacingModel","texture__","setTexture","texture","stopPropagation","editTexture","removeTexture","newTexture","title","scopedSlots","_u","fn","proxy","ref","_t","bodyScroll","body","scrollTop","$refs","dialogEl","HTMLElement","captureFocus","activeElement","contains","focus","components","Dialog","btn","text","primary","buttons","startsWith","default","model","indexOf","_k","keyCode","initialValue","config","productionTip","oldSelection","blur","container","mnt","instance","propsData","$mount","$on","$destroy","$el","remove","Dialogs","alert","confirm","prompt","titleText","cancel","nameModel","index","$set","removeProperty","addProperty","save","properties","textureName","curProp","trim","some","textureList","find","wheelHandler","newSize","startFacing","currentIndex","pop","oldName","shiftKey","deltaY","nextTexture","lastTexture","passive","TextureEditor","selectedMap","maps","size","hasUnsavedChanges","tiles","assign","GameEditor","pos","posTile","$delete","obj","oldTexture","findIndex","Map","Sidebar","viewportSize","onActionComplete","canMoveForwards","turnLeft","turnRight","goForwards","staticStyle","knownFaces","cellSize","player","boundaries","min","matchesPos","isMounted","xMin","Number","MAX_SAFE_INTEGER","yMin","xMax","yMax","Math","max","numRows","numCols","maxHeight","maxWidth","posFaces","f","w","parent","parentElement","parentComputedStyle","getComputedStyle","xPadding","parseFloat","paddingLeft","replace","paddingRight","yPadding","paddingTop","paddingBottom","clientWidth","clientHeight","updateSize","observer","ResizeObserver","observe","disconnect","rightFrom","leftFrom","goTowards","hasFace","playerPosKey","playerTile","playerFacingDelta","playerFacingPos","playerFacingKey","playerFacingTile","testFace","action","angle","onTransitionEnd","directions","wasFacing","shouldHide","facedDirections","includes","gameview","updateCSSVariables","baseAngle","newFacing","oldFacing","newIndex","oldIndex","abs","newAction","oldAction","setProperty","toString","immediate","keyboardListener","isActionActive","innerHeight","move","deep","GameView","Controls","MiniMap","projects","projectModel","toLowerCase","projectName","openProject","isExistingProject","createNewProject","DEFAULT_TEXTURES","DEFAULT_MAP_FACTORY","store","createInstance","storeName","description","guid","random","item","getItem","direction","selectMap","renameMap","removeMap","addMap","newMapName","validMapName","isValidMapName","mapName","currentNames","newName","isSameish","sanitizedName","generateMapName","getUsedTextures","values","getTextureBlobsAndFiles","css","lines","split","imageUrls","line","remainder","Boolean","url","fetch","then","blob","image","filename","allSettled","settledPromises","status","generateTextureCSS","cssBody","join","oldStylElements","Array","from","querySelectorAll","styleElement","mapname","innerHTML","textureCSS","projectnames","filtered","pn","setItem","JSZip","zip","reduce","acc","cur","setupScript","JSON","stringify","file","imagesAndBlobs","imageAndBlob","filepath","viewerResponse","viewerjs","tdcMacroResponse","tdcMacroJs","tdcTemplateResponse","tdcTemplateJs","passages","mapInitPassage","generateAsync","zipBlob","saveAs","initStyleTarget","Editor","Preview","ProjectManager","MapPicker","app"],"mappings":"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","file":"js/app.7f36f465.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-135fd2f0\":\"5ceb3476\",\"chunk-2d0b1f6a\":\"27140ac2\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dungeoncrawler/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=style&index=0&id=1779e556&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Preview.vue?vue&type=style&index=0&id=3c08abb3&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Controls.vue?vue&type=style&index=0&id=2f10f450&lang=scss&scoped=true&\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Editor.vue?vue&type=style&index=0&id=54c9fc74&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GameView.vue?vue&type=style&index=0&id=20e00c05&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sidebar.vue?vue&type=style&index=0&id=3e5535f3&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MiniMap.vue?vue&type=style&index=0&id=32f576c2&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Prompt.vue?vue&type=style&index=0&id=e73ce90e&scoped=true&lang=scss&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextureEditor.vue?vue&type=style&index=0&id=78ec3c8e&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dialog.vue?vue&type=style&index=0&id=e742e45a&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProjectManager.vue?vue&type=style&index=0&id=5fd011e4&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app\"},[_c('div',{staticClass:\"appbar\"},[_c('h1',[_vm._v(\"Twine Dungeon Crawler System\")]),(_vm.state !== 'project-manager')?[_c('button',{class:{ active: _vm.state === 'editor'},attrs:{\"type\":\"button\"},domProps:{\"textContent\":_vm._s('Editor')},on:{\"click\":function($event){_vm.state = 'editor'}}}),_c('button',{class:{ active: _vm.state === 'preview'},attrs:{\"type\":\"button\"},domProps:{\"textContent\":_vm._s('Preview')},on:{\"click\":function($event){_vm.state = 'preview'}}}),_c('span',{staticClass:\"separator\"}),(_vm.project.hasUnsavedChanges)?_c('button',{on:{\"click\":function($event){return _vm.saveProject()}}},[_vm._v(\"Save changes\")]):_c('button',{on:{\"click\":function($event){return _vm.downloadFiles()}}},[_vm._v(\"Download files\")]),_c('button',{staticClass:\"close\",attrs:{\"title\":\"Close project\"},on:{\"click\":function($event){return _vm.closeProject()}}},[_vm._v(\"\")])]:_vm._e()],2),(_vm.state === 'project-manager')?_c('ProjectManager',{on:{\"setProject\":function($event){return _vm.setProject($event)}}}):_vm._e(),(_vm.state !== 'project-manager')?_c('MapPicker',{staticClass:\"map-picker\",attrs:{\"state\":_vm.state},on:{\"setMap\":function($event){return _vm.setMap($event)}}}):_vm._e(),(_vm.state === 'editor')?_c('Editor',{key:\"editor\"}):_vm._e(),(_vm.state === 'preview')?_c('Preview',{key:\"preview\",attrs:{\"show\":_vm.state === 'preview'}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"editor\"},[_c('div',{staticClass:\"editor-map\"},[_c('Map',{attrs:{\"rows\":_vm.rows,\"activeTool\":_vm.activeTool,\"activeTexture\":_vm.activeTexture,\"mapViewMode\":_vm.mapViewMode,\"startTile\":_vm.startTile},on:{\"updateTile\":function($event){return _vm.updateTile($event)},\"setStart\":function($event){return _vm.setStart($event)}}})],1),_c('div',{staticClass:\"editor-sidebar\"},[_c('Sidebar',{attrs:{\"activeTool\":_vm.activeTool,\"activeTexture\":_vm.activeTexture,\"mapViewMode\":_vm.mapViewMode,\"textures\":_vm.textures,\"tools\":_vm.tools,\"mapSize\":_vm.mapSize,\"startFacing\":_vm.map.start.facing},on:{\"setTexture\":function($event){_vm.activeTexture = $event},\"setTool\":function($event){_vm.activeTool = $event},\"setMapViewMode\":function($event){_vm.mapViewMode = $event},\"setMapSize\":function($event){return _vm.setMapSize($event)},\"saveTexture\":function($event){return _vm.saveTexture($event)},\"removeTexture\":function($event){return _vm.removeTextureByName($event)},\"setStartFacing\":function($event){return _vm.setStartFacing($event)}}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { Texture } from \"@/types/Texture.types\";\n\nexport const faces = ['floor', 'north', 'east', 'south', 'west'] as const;\nexport type Face = typeof faces[number];\nexport type Tile = {\n  floor: string;\n  north: string;\n  east: string;\n  south: string;\n  west: string;\n  faces: Face[];\n  x: number;\n  y: number;\n};\nexport type Row = Tile[];\nexport type MapViewMode = 'individual' | 'complete';\nexport interface Map {\n  startTile: Tile;\n  rows: Row[];\n}\n\nexport type Facing = 'north' | 'east' | 'south' | 'west';\n\nexport interface Pos {\n  x: number;\n  y: number;\n}\n\nexport type Size = Pos;\n\nexport interface FacingPos extends Pos {\n  facing: Facing;\n}\n\nexport interface FacePos extends Pos {\n  facing: Face;\n}\n\nexport interface ProjectDefintion {\n  guid: string;\n  name: string;\n  maps: MapDefinition[];\n  textures: Texture[];\n  hasUnsavedChanges: boolean;\n}\n\nexport interface MapDefinition {\n  name: string;\n  size: Size;\n  start: FacingPos;\n  tiles: { [pos: string]: Tile };\n}","import { Tile } from \"@/types/Map.types\";\n\nexport const createEmptyTile = (x: number, y: number): Tile => {\n    return {\n      x,\n      y,\n      floor: '',\n      north: '',\n      east: '',\n      south: '',\n      west: '',\n      faces: [],\n    }\n  };\n  \nexport const Timeout = (delay = 0): Promise<void> => {\n  return new Promise((resolve) => window.setTimeout(resolve, delay));\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\",style:({ '--numRows': _vm.rows.length, '--numCols': _vm.rows[0].length })},[_c('div',{staticClass:\"map\",class:_vm.mapViewMode},_vm._l((_vm.rowsWithHover),function(row,r){return _c('div',{key:r,staticClass:\"row\"},_vm._l((row),function(tile,c){\nvar _obj;\nreturn _c('div',{key:(r + \",\" + c),staticClass:\"tile\",class:( _obj = {}, _obj['tile--start'] = _vm.isStartTile(tile), _obj ),on:{\"click\":function($event){return _vm.updateTile(tile)},\"mouseenter\":function($event){return _vm.mouseEnter(tile)},\"mouseleave\":function($event){return _vm.mouseLeave(tile)},\"dblclick\":function($event){return _vm.setStart(tile)}}},_vm._l((tile.faces),function(face){return _c('div',{key:(r + \",\" + c + \",\" + face),class:(\"face \" + face + \" texture__\" + (tile[face]))})}),0)}),0)}),0)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Row, Tile, Face, MapViewMode } from '@/types/Map.types';\nimport { Component, Prop, Vue } from 'vue-property-decorator';\n\ntype KeypressHandler = (e: KeyboardEvent) => void;\n\n@Component\nexport default class Map extends Vue {\n  @Prop() rows!: Row[];\n  @Prop() activeTool!: Face;\n  @Prop() activeTexture!: string;\n  @Prop() mapViewMode!: MapViewMode;\n  @Prop() startTile!: Tile | null;\n  hover: Tile | null = null;\n  keydownHandler: KeypressHandler | null = null;\n\n  get rowsWithHover(): Row[] {\n    const { rows, hover, activeTool, activeTexture } = this;\n    return rows.map((row) => {\n      return row.map((tile) => {\n        const tileWithHover = { ...tile }\n        if (hover && hover.x === tile.x && hover.y === tile.y) {\n          tileWithHover[activeTool] = activeTexture;\n          tileWithHover.faces = [activeTool, ...tileWithHover.faces.filter((face) => face !== activeTool)];\n        }\n        return tileWithHover;\n      });\n    });\n  }\n\n  isStartTile(tile: Tile): boolean {\n    if (this.startTile?.x !== tile.x) return false;\n    if (this.startTile?.y !== tile.y) return false;\n    return true;\n  }\n\n  mouseEnter(tile: Tile): void {\n    this.hover = tile;\n  }\n\n  mouseLeave(tile: Tile): void {\n    if (this.hover?.x === tile.x && this.hover?.y === tile.y) {\n      this.hover = null;\n    }\n  }\n\n  updateTile(tile: Tile, tool?: Face, clear?: boolean): void {\n    if (!tool) tool = this.activeTool;\n    this.$emit('updateTile', { tile, tool, clear });\n  }\n\n  setStart(tile: Tile): void {\n    this.$emit('setStart', {\n      x: tile.x,\n      y: tile.y,\n      facing: 'north',\n    });\n  }\n\n  created(): void {\n    // create handler\n    this.keydownHandler = (function(this: Map, e: KeyboardEvent) {\n      if (!this.hover) return;\n      if (e.key === 'W') this.updateTile(this.hover, 'north', true);\n      if (e.key === 'A') this.updateTile(this.hover, 'west', true);\n      if (e.key === 'S') this.updateTile(this.hover, 'south', true);\n      if (e.key === 'D') this.updateTile(this.hover, 'east', true);\n      if (e.key === 'F') this.updateTile(this.hover, 'floor', true);\n      if (e.key === 'w') this.updateTile(this.hover, 'north');\n      if (e.key === 'a') this.updateTile(this.hover, 'west');\n      if (e.key === 's') this.updateTile(this.hover, 'south');\n      if (e.key === 'd') this.updateTile(this.hover, 'east');\n      if (e.key === 'f') this.updateTile(this.hover, 'floor');\n      e.preventDefault();\n    }).bind(this);\n    // Bind\n    window.addEventListener('keypress', this.keydownHandler);\n  }\n\n  beforeDestroy(): void {\n    if (this.keydownHandler) window.removeEventListener('keypress', this.keydownHandler);\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Map.vue?vue&type=template&id=1779e556&scoped=true&\"\nimport script from \"./Map.vue?vue&type=script&lang=ts&\"\nexport * from \"./Map.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Map.vue?vue&type=style&index=0&id=1779e556&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1779e556\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"sidebar\"},[(_vm.editingTexture !== null)?_c('TextureEditor',{attrs:{\"textureName\":_vm.editingTexture},on:{\"close\":function($event){_vm.editingTexture = null},\"save\":function($event){return _vm.saveTexture(_vm.editingTexture, $event)}}}):_vm._e(),_c('div',{staticClass:\"mapsize\"},[_c('h2',[_vm._v(\"Map size\")]),_c('label',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.mapSizeXModel),expression:\"mapSizeXModel\"}],attrs:{\"type\":\"number\"},domProps:{\"value\":(_vm.mapSizeXModel)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.mapSizeXModel=$event.target.value}}}),_vm._v(\" wide\")]),_c('label',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.mapSizeYModel),expression:\"mapSizeYModel\"}],attrs:{\"type\":\"number\"},domProps:{\"value\":(_vm.mapSizeYModel)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.mapSizeYModel=$event.target.value}}}),_vm._v(\" high\")])]),_c('div',{staticClass:\"mapViewMode\"},[_c('h2',[_vm._v(\"View type\")]),_c('label',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.mapViewModeModel),expression:\"mapViewModeModel\"}],attrs:{\"type\":\"radio\",\"value\":\"individual\"},domProps:{\"checked\":_vm._q(_vm.mapViewModeModel,\"individual\")},on:{\"change\":function($event){_vm.mapViewModeModel=\"individual\"}}}),_vm._v(\"Individual 3D\")]),_c('label',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.mapViewModeModel),expression:\"mapViewModeModel\"}],attrs:{\"type\":\"radio\",\"value\":\"complete\"},domProps:{\"checked\":_vm._q(_vm.mapViewModeModel,\"complete\")},on:{\"change\":function($event){_vm.mapViewModeModel=\"complete\"}}}),_vm._v(\"Complete 3D\")])]),_c('div',{staticClass:\"tools\"},[_c('div',{staticClass:\"flex\"},[_c('div',[_c('h2',[_vm._v(\"Face \"),_c('span',{staticClass:\"info-btn\",attrs:{\"data-tooltip\":_vm.faceTooltip}},[_vm._v(\"Info\")])]),_c('div',{staticClass:\"faces\"},_vm._l((_vm.tools),function(tool){\nvar _obj;\nreturn _c('button',{key:tool,staticClass:\"tool-btn\",class:( _obj = { active: tool === _vm.activeTool}, _obj[tool] = true, _obj ),attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.setTool(tool)}}},[_vm._v(_vm._s(_vm.keyBindings[tool]))])}),0)]),_c('div',{staticClass:\"start-facing\"},[_c('h2',[_vm._v(\"Starting point\")]),_c('p',[_vm._v(\"Double click a tile to start start position\")]),_c('label',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.startFacingModel),expression:\"startFacingModel\"}],attrs:{\"type\":\"radio\",\"name\":\"startFacing\",\"value\":\"north\"},domProps:{\"checked\":_vm._q(_vm.startFacingModel,\"north\")},on:{\"change\":function($event){_vm.startFacingModel=\"north\"}}}),_vm._v(\" Facing north\")]),_c('label',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.startFacingModel),expression:\"startFacingModel\"}],attrs:{\"type\":\"radio\",\"name\":\"startFacing\",\"value\":\"east\"},domProps:{\"checked\":_vm._q(_vm.startFacingModel,\"east\")},on:{\"change\":function($event){_vm.startFacingModel=\"east\"}}}),_vm._v(\" Facing east\")]),_c('label',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.startFacingModel),expression:\"startFacingModel\"}],attrs:{\"type\":\"radio\",\"name\":\"startFacing\",\"value\":\"south\"},domProps:{\"checked\":_vm._q(_vm.startFacingModel,\"south\")},on:{\"change\":function($event){_vm.startFacingModel=\"south\"}}}),_vm._v(\" Facing south\")]),_c('label',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.startFacingModel),expression:\"startFacingModel\"}],attrs:{\"type\":\"radio\",\"name\":\"startFacing\",\"value\":\"west\"},domProps:{\"checked\":_vm._q(_vm.startFacingModel,\"west\")},on:{\"change\":function($event){_vm.startFacingModel=\"west\"}}}),_vm._v(\" Facing west\")])])])]),_c('div',{staticClass:\"textures\"},[_c('h2',[_vm._v(\"Texture\")]),_c('div',[_c('button',{staticClass:\"texture-btn\",class:{ active: _vm.activeTexture === '', texture__: true},attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.setTexture('')}}},[_vm._v(\"Clear\")]),_vm._l((_vm.textures),function(texture){\nvar _obj;\nreturn _c('button',{key:texture,staticClass:\"texture-btn\",class:( _obj = { active: texture === _vm.activeTexture}, _obj[(\"texture__\" + texture)] = true, _obj ),attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.setTexture(texture)}}},[_c('button',{staticClass:\"edit-texture\",on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.editTexture(texture)}}},[_vm._v(\"Edit\")]),_c('button',{staticClass:\"remove-texture\",on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.removeTexture(texture)}}},[_vm._v(\"Remove\")])])}),_c('button',{staticClass:\"texture-btn texture-new\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.newTexture()}}},[_vm._v(\"New Texture\")])],2)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Dialog',{attrs:{\"title\":_vm.title},scopedSlots:_vm._u([{key:\"actions\",fn:function(){return [_c('button',{staticClass:\"primary\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.$emit('btn')}}},[_vm._v(\"Ok\")])]},proxy:true}])},[_vm._v(\" \"+_vm._s(_vm.message)+\" \")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"backdrop\"},[_c('div',{ref:\"dialogEl\",staticClass:\"dialog\",attrs:{\"tabindex\":\"-1\"}},[_c('div',{staticClass:\"dialog-title\"},[_vm._v(\" \"+_vm._s(_vm.title)+\" \")]),_c('div',{staticClass:\"dialog-body\"},[_vm._t(\"default\")],2),_c('div',{staticClass:\"dialog-actions\"},[_vm._t(\"actions\")],2)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\n\n@Component\nexport default class Dialog extends Vue {\n    @Prop() title!: string;\n    captureFocus!: () => void;\n    bodyScroll!: number;\n\n    mounted(): void {\n        this.bodyScroll = document.body.scrollTop;\n        if (this.$refs.dialogEl instanceof HTMLElement) {\n            const dialogEl: HTMLElement = this.$refs.dialogEl;\n            this.captureFocus = () => {\n                if (dialogEl !== document.activeElement && !dialogEl.contains(document.activeElement)) {\n                    dialogEl.focus();\n                    document.body.scrollTop = this.bodyScroll;\n                }\n            }\n            this.captureFocus();\n            document.body.addEventListener('focusin', this.captureFocus);\n        }\n    }\n\n    beforeDestroy(): void {\n        document.body.removeEventListener('focusin', this.captureFocus);\n    }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dialog.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dialog.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Dialog.vue?vue&type=template&id=e742e45a&scoped=true&\"\nimport script from \"./Dialog.vue?vue&type=script&lang=ts&\"\nexport * from \"./Dialog.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Dialog.vue?vue&type=style&index=0&id=e742e45a&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e742e45a\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\nimport Dialog from './Dialog.vue';\n\n@Component({\n    components: {\n        Dialog,\n    }\n})\nexport default class Alert extends Vue {\n    @Prop() title!: string;\n    @Prop() message!: string;\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Alert.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Alert.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Alert.vue?vue&type=template&id=7581ceab&\"\nimport script from \"./Alert.vue?vue&type=script&lang=ts&\"\nexport * from \"./Alert.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Dialog',{attrs:{\"title\":_vm.title},scopedSlots:_vm._u([{key:\"actions\",fn:function(){return _vm._l((_vm.buttonObjects),function(btn){return _c('button',{key:btn.text,class:{ primary: btn.primary },attrs:{\"type\":\"button\"},domProps:{\"textContent\":_vm._s(btn.text)},on:{\"click\":function($event){return _vm.$emit('btn', btn.text)}}})})},proxy:true}])},[_vm._v(\" \"+_vm._s(_vm.message)+\" \")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\nimport Dialog from './Dialog.vue';\n\ninterface Button {\n    text: string;\n    primary: boolean;\n}\n\n@Component({\n    components: {\n        Dialog,\n    }\n})\nexport default class Confirm extends Vue {\n    @Prop() title!: string;\n    @Prop() message!: string;\n    @Prop({ default: ['Cancel', '!Ok']}) buttons!: string[];\n\n    get buttonObjects(): Button[] {\n        return this.buttons?.map((btn) => ({\n            text: btn.startsWith('!') ? btn.slice(1) : btn,\n            primary: btn.startsWith('!'),\n        })) || [];\n    }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Confirm.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Confirm.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Confirm.vue?vue&type=template&id=dfaa3f78&\"\nimport script from \"./Confirm.vue?vue&type=script&lang=ts&\"\nexport * from \"./Confirm.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Dialog',{attrs:{\"title\":_vm.title},scopedSlots:_vm._u([{key:\"actions\",fn:function(){return [_c('button',{attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.$emit('btn', false)}}},[_vm._v(\"Cancel\")]),_c('button',{staticClass:\"primary\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.$emit('btn', _vm.model)}}},[_vm._v(\"Ok\")])]},proxy:true}])},[_vm._v(\" \"+_vm._s(_vm.message)+\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.model),expression:\"model\"}],domProps:{\"value\":(_vm.model)},on:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.$emit('btn', _vm.model)},\"input\":function($event){if($event.target.composing){ return; }_vm.model=$event.target.value}}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\nimport Dialog from './Dialog.vue';\n\n@Component({\n    components: {\n        Dialog,\n    }\n})\nexport default class Prompt extends Vue {\n    @Prop() title!: string;\n    @Prop() message!: string;\n    @Prop() initialValue!: string;\n\n    model = '';\n\n    created(): void {\n        this.model = this.initialValue;\n    }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Prompt.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Prompt.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Prompt.vue?vue&type=template&id=e73ce90e&scoped=true&\"\nimport script from \"./Prompt.vue?vue&type=script&lang=ts&\"\nexport * from \"./Prompt.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Prompt.vue?vue&type=style&index=0&id=e73ce90e&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e73ce90e\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport Alert from './Alert.vue'\nimport Confirm from './Confirm.vue'\nimport Prompt from './Prompt.vue'\n\nVue.config.productionTip = false;\n\nconst alert = (title: string, message: string): Promise<void> => {\n    const oldSelection = document.activeElement as HTMLElement | null;\n    oldSelection?.blur();\n\n    return new Promise<void>((resolve) => {\n        const container = document.createElement('div');\n        const mnt = document.createElement('div');\n        container.appendChild(mnt);\n        document.body.appendChild(container);\n\n        const instance = new Alert({ propsData: {\n            title,\n            message,\n        }}).$mount(mnt);\n\n        instance.$on('btn', () => {\n            instance.$destroy();\n            instance.$el.remove();\n            resolve();\n            oldSelection?.focus();\n        });\n    });\n};\n\nconst confirm = (title: string, message: string, buttons: string[] = ['Cancel', '!Ok']): Promise<string> => {\n    const oldSelection = document.activeElement as HTMLElement | null;\n    oldSelection?.blur();\n\n    return new Promise<string>((resolve) => {\n        const container = document.createElement('div');\n        const mnt = document.createElement('div');\n        container.appendChild(mnt);\n        document.body.appendChild(container);\n\n        const instance = new Confirm({ propsData: {\n            title,\n            message,\n            buttons,\n        }}).$mount(mnt);\n\n        instance.$on('btn', (text: string) => {\n            instance.$destroy();\n            instance.$el.remove();\n            resolve(text);\n            oldSelection?.focus();\n        });\n    });\n};\n\nconst prompt = (title: string, message: string, initialValue: string): Promise<string | false> => {\n    const oldSelection = document.activeElement as HTMLElement | null;\n    oldSelection?.blur();\n\n    return new Promise<string | false>((resolve) => {\n        const container = document.createElement('div');\n        const mnt = document.createElement('div');\n        container.appendChild(mnt);\n        document.body.appendChild(container);\n\n        const instance = new Prompt({ propsData: {\n            title,\n            message,\n            initialValue,\n        }}).$mount(mnt);\n\n        instance.$on('btn', (text: string | false) => {\n            instance.$destroy();\n            instance.$el.remove();\n            resolve(text);\n            oldSelection?.focus();\n        });\n    });\n};\n\nexport const Dialogs = { alert, confirm, prompt };","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"overlay\"},[_c('div',{staticClass:\"dialog\",on:{\"input\":function($event){_vm.error = ''}}},[_c('div',{staticClass:\"dialog-head\"},[_vm._v(\" \"+_vm._s(_vm.titleText)+\" \"),_c('button',{staticClass:\"close\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.cancel()}}})]),_c('div',{staticClass:\"dialog-body\"},[(_vm.error)?_c('div',{staticClass:\"error\"},[_vm._v(_vm._s(_vm.error))]):_vm._e(),_c('label',{staticClass:\"name\"},[_vm._v(\" Name: \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.nameModel),expression:\"nameModel\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.nameModel)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.nameModel=$event.target.value}}})]),_c('h3',[_vm._v(\"CSS Properties\")]),_c('div',{staticClass:\"properties\"},_vm._l((_vm.properties),function(property,index){return _c('div',{key:(\"cssproperty-\" + index),staticClass:\"property\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(property.name),expression:\"property.name\"}],staticClass:\"property-name\",attrs:{\"type\":\"text\"},domProps:{\"value\":(property.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(property, \"name\", $event.target.value)}}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(property.value),expression:\"property.value\"}],staticClass:\"property-value\",attrs:{\"type\":\"text\"},domProps:{\"value\":(property.value)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(property, \"value\", $event.target.value)}}}),_c('button',{staticClass:\"remove-property\",on:{\"click\":function($event){return _vm.removeProperty(property)}}},[_vm._v(\"\")])])}),0),_c('button',{staticClass:\"add-property\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.addProperty()}}},[_vm._v(\"Add new property\")])]),_c('div',{staticClass:\"dialog-footer\"},[_c('button',{attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.cancel()}}},[_vm._v(\"Cancel\")]),_c('button',{attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.save()}}},[_vm._v(\"Save\")])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { ProjectDefintion } from '@/types/Map.types';\nimport { CSSProperty, Texture } from '@/types/Texture.types';\nimport { Component, Vue, Prop, InjectReactive } from 'vue-property-decorator';\n\n@Component\nexport default class TextureEditor extends Vue {\n    @Prop() textureName!: string;\n    @InjectReactive() project!: ProjectDefintion;\n    nameModel = '';\n    error = '';\n    properties: CSSProperty[] = [];\n\n    get textureList(): Texture[] {\n        return this.project.textures;\n    }\n\n    get titleText(): string {\n        return this.textureName ? `Edit ${this.textureName}` : 'New texture';\n    }\n\n    removeProperty(property: CSSProperty): void {\n        this.properties = this.properties.filter((curProp) => curProp !== property);\n    }\n\n    addProperty(): void {\n        this.properties.push({ name: '', value: '' });\n    }\n\n    cancel(): void {\n        this.$emit('close');\n    }\n\n    save(): void {\n        if (!this.nameModel.trim()) {\n            this.error = 'Texture must have a name';\n            return;\n        }\n        if (this.properties.some((property) => !property.name)) {\n            this.error = 'Cannot have css properties without a name';\n            return;\n        }\n        // TODO: I should make the name 'safe'\n        this.$emit('save', { name: this.nameModel.trim(), properties: this.properties });\n        this.$emit('close');\n    }\n\n    created(): void {\n        if (this.textureName) {\n            this.nameModel = this.textureName;\n            this.properties = this.textureList\n                .find((texture) => texture.name === this.textureName)\n                ?.properties.map((property) => ({ ...property }))\n                || [];\n        }\n    }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextureEditor.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextureEditor.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./TextureEditor.vue?vue&type=template&id=78ec3c8e&scoped=true&\"\nimport script from \"./TextureEditor.vue?vue&type=script&lang=ts&\"\nexport * from \"./TextureEditor.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./TextureEditor.vue?vue&type=style&index=0&id=78ec3c8e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"78ec3c8e\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Face, Facing, MapViewMode, Size } from '@/types/Map.types';\nimport { Texture } from '@/types/Texture.types';\nimport { Component, Prop, Vue } from 'vue-property-decorator';\nimport { Dialogs } from '../Dialog/dialogs';\n\nimport TextureEditor from './TextureEditor.vue';\n\ntype WheelHandler = (e: WheelEvent) => void;\n\n@Component({\n  components: {\n    TextureEditor,\n  },\n})\nexport default class Sidebar extends Vue {\n  @Prop() activeTool!: Face;\n  @Prop() activeTexture!: string;\n  @Prop() mapViewMode!: MapViewMode;\n  @Prop() tools!: Face[];\n  @Prop() textures!: string[];\n  @Prop() mapSize!: Size;\n  @Prop({ default: 'north' }) startFacing!: Facing;\n\n  editingTexture: string | null = null;\n  wheelHandler: WheelHandler | null = null;\n  keyBindings: {[tool in Face]: string} = {\n    floor: 'f',\n    north: 'w',\n    east: 'd',\n    south: 's',\n    west: 'a',\n  };\n\n  faceTooltip = `Select what surface to paint your selected texture on (ie: the north/east/south/west wall of a tile, or the tile's floor).\\n\\nThe letters on the faces represent keybindings. These do not select a tool but instead apply selected texture on the given face for the hovered tile.`;\n\n  get mapSizeXModel(): number {\n    return this.mapSize.x;\n  }\n  set mapSizeXModel(x: number) {\n    const newSize: Size = { ...this.mapSize, x };\n    this.$emit('setMapSize', newSize);\n  }\n\n  get mapSizeYModel(): number {\n    return this.mapSize.y;\n  }\n  set mapSizeYModel(y: number) {\n    const newSize: Size = { ...this.mapSize, y };\n    this.$emit('setMapSize', newSize);\n  }\n\n  get mapViewModeModel(): MapViewMode {\n    return this.mapViewMode;\n  }\n  set mapViewModeModel(mapViewMode: MapViewMode) {\n    this.$emit('setMapViewMode', mapViewMode);\n  }\n\n  get startFacingModel(): Facing {\n    return this.startFacing;\n  }\n\n  set startFacingModel(facing: Facing) {\n    this.$emit('setStartFacing', facing);\n  }\n\n  setTexture(texture: string): void {\n    this.$emit('setTexture', texture);\n  }\n\n  setTool(tool: string): void {\n    this.$emit('setTool', tool);\n  }\n\n  nextTexture(): void {\n    const currentIndex = this.textures.indexOf(this.activeTexture);\n    if ((currentIndex + 1) >= this.textures.length) {\n      this.setTexture(this.textures[0]);\n    } else {\n      this.setTexture(this.textures[currentIndex + 1]);\n    }\n  }\n\n  lastTexture(): void {\n    const currentIndex = this.textures.indexOf(this.activeTexture);\n    if ((currentIndex - 1) < 0) {\n      this.setTexture(this.textures.slice().pop() as Face);\n    } else {\n      this.setTexture(this.textures[currentIndex - 1]);\n    }\n  }\n\n  newTexture(): void {\n    this.editingTexture = '';\n  }\n\n  editTexture(texture: string): void {\n    this.editingTexture = texture;\n  }\n\n  async removeTexture(texture: string): Promise<void> {\n    if (await Dialogs.confirm('Delete texture', 'are you sure you want to delete this texture?', ['No', '!Yes']) === 'Yes') {\n      this.$emit('removeTexture', texture);\n    }\n  }\n\n  saveTexture(oldName: string, texture: Texture): void {\n    this.$emit('saveTexture', { oldName, texture });\n  }\n\n  created(): void {\n    // create handler\n    this.wheelHandler = (function(this: Sidebar, e: WheelEvent) {\n      if (!e.shiftKey) return;\n      e.preventDefault();\n      if (e.deltaY > 0) this.nextTexture();\n      else if (e.deltaY < 0) this.lastTexture();\n    }).bind(this);\n    // Bind\n    window.addEventListener('wheel', this.wheelHandler, { passive: false });\n  }\n\n  beforeDestroy(): void {\n    if (this.wheelHandler) window.removeEventListener('wheel', this.wheelHandler);\n  }\n\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sidebar.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sidebar.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Sidebar.vue?vue&type=template&id=3e5535f3&scoped=true&\"\nimport script from \"./Sidebar.vue?vue&type=script&lang=ts&\"\nexport * from \"./Sidebar.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Sidebar.vue?vue&type=style&index=0&id=3e5535f3&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3e5535f3\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Texture } from '@/types/Texture.types';\nimport { Component, Vue, InjectReactive } from 'vue-property-decorator';\n\nimport { Row, Tile, Face, faces, MapViewMode, ProjectDefintion, MapDefinition, FacingPos, Size, Facing } from '@/types/Map.types';\nimport { createEmptyTile } from '@/util';\n\nimport Map from './Map.vue';\nimport Sidebar from './Sidebar.vue';\n\n@Component({\n  components: {\n    Map,\n    Sidebar,\n  },\n})\nexport default class Editor extends Vue {\n  @InjectReactive() project!: ProjectDefintion;\n  @InjectReactive() selectedMap!: string;\n\n  mapViewMode: MapViewMode = 'individual';\n  tools: Face[] = faces.slice();\n  activeTool: Face = 'floor';\n  activeTexture = '';\n\n  get map(): MapDefinition {\n    const { project, selectedMap } = this;\n    return project.maps.find((map) => map.name === selectedMap) || project.maps[0];\n  }\n\n  get mapSize(): Size {\n    return this.map.size;\n  }\n\n  set mapSize(size: Size) {\n    this.map.size = size;\n    this.project.hasUnsavedChanges = true;\n  }\n\n  get startTile(): FacingPos {\n    return this.map.start;\n  }\n\n  set startTile(start: FacingPos) {\n    this.map.start = start;\n    this.project.hasUnsavedChanges = true;\n  }\n\n  get tiles(): { [pos: string]: Tile }  {\n    return this.map.tiles;\n  }\n\n  get textureList(): Texture[] {\n    return this.project.textures;\n  }\n\n  get textures(): string[] {\n    return this.project.textures.map((texture) => texture.name);\n  }\n\n  get rows(): Row[] {\n    const { mapSize, tiles } = this;\n    const rows: Row[] = [];\n    for (let y = 0; y < mapSize.y; y++) {\n      const row: Row = [];\n      for (let x = 0; x < mapSize.x; x++) {\n        let tile = tiles[`${x}:${y}`] || createEmptyTile(x, y);\n        row.push(tile);\n      }\n      rows.push(row);\n    }\n    return rows;\n  }\n\n  created(): void {\n    Object.assign(window, { GameEditor: this });\n  }\n\n  updateTile({ tile, tool, clear }: { tile: Tile, tool: Face, clear?: boolean }): void {\n    const {x, y} = tile;\n    const pos = `${x}:${y}`;\n\n    const posTile = this.tiles[pos] || createEmptyTile(x, y);\n    posTile[tool] = clear ? '' : this.activeTexture;\n    // Remove the tool from tile faces\n    posTile.faces = posTile.faces.filter((face) => face !== tool);\n    // But if texture isnt empty, add it back\n    if (this.activeTexture) posTile.faces.push(tool);\n\n    if (posTile.floor || posTile.north || posTile.east || posTile.south || posTile.west) {\n      this.$set(this.tiles, pos, posTile);\n    } else {\n      this.$delete(this.tiles, pos);\n    }\n    this.project.hasUnsavedChanges = true;\n  }\n\n  saveTexture({ oldName, texture }: { oldName: string, texture: Texture }): void {\n    let obj = this.textureList.find((oldTexture) => oldTexture.name === oldName);\n    if (!obj) {\n      this.textureList.push(texture);\n    } else {\n      Object.assign(obj, texture);\n    }\n    this.project.hasUnsavedChanges = true;\n  }\n\n  removeTextureByName(name: string): void {\n    const index = this.textureList.findIndex((texture) => texture.name === name);\n    if (index >= 0) {\n      this.textureList.splice(index, 1);\n    }\n    this.project.hasUnsavedChanges = true;\n  }\n\n  setStart(startTile: FacingPos): void {\n    this.startTile = startTile;\n    this.project.hasUnsavedChanges = true;\n  }\n\n  setStartFacing(facing: Facing): void {\n    this.setStart({ ...this.startTile, facing });\n  }\n\n  setMapSize(size: Size): void {\n    this.mapSize = size;\n    this.project.hasUnsavedChanges = true;\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Editor.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Editor.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Editor.vue?vue&type=template&id=54c9fc74&scoped=true&\"\nimport script from \"./Editor.vue?vue&type=script&lang=ts&\"\nexport * from \"./Editor.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Editor.vue?vue&type=style&index=0&id=54c9fc74&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"54c9fc74\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"preview\",style:({ '--viewportSize': (_vm.viewportSize + \"px\") })},[_c('GameView',{attrs:{\"map\":_vm.map,\"x\":_vm.x,\"y\":_vm.y,\"facing\":_vm.facing},on:{\"actionComplete\":function($event){return _vm.onActionComplete()}}}),_c('div',[_c('Controls',{attrs:{\"canMoveForwards\":_vm.canMoveForwards},on:{\"turnLeft\":function($event){return _vm.turnLeft()},\"turnRight\":function($event){return _vm.turnRight()},\"goForwards\":function($event){return _vm.goForwards()}}}),_c('div',{staticStyle:{\"width\":\"300px\",\"height\":\"300px\",\"margin-top\":\"1em\",\"background\":\"black\",\"padding\":\"1em\"}},[_c('MiniMap',{attrs:{\"faces\":_vm.knownFaces,\"player\":{ x: _vm.x, y: _vm.y, facing: _vm.facing}}})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {\nvar _obj;\nvar _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"minimap\",style:(( _obj = {}, _obj['--tdc-mm-cell-size'] = (_vm.cellSize + \"px\"), _obj ))},[(_vm.isMounted)?_vm._l((_vm.rows),function(row,y){return _c('div',{key:(\"tdc-mm-row-\" + y),staticClass:\"mm-tile-row\"},_vm._l((row),function(tile,x){return _c('div',{key:(\"tdc-mm-cell-\" + x + \"-\" + y),staticClass:\"mm-tile-cell\"},[_vm._l((tile),function(face){return _c('div',{key:(\"tdc-mm-face-\" + face + \"-\" + x + \"-\" + y),class:(\"mm-tile-cell-face mm-tile-cell-face--\" + face)})}),(_vm.player && (_vm.player.x - _vm.boundaries.x.min) === x && (_vm.player.y - _vm.boundaries.y.min) === y)?_c('div',{class:(\"tdc-mm-player tdc-mm-player--\" + (_vm.player.facing))}):_vm._e()],2)}),0)}):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Pos, Face, FacePos, faces as allFaces } from '@/types/Map.types';\nimport { IMiniMap } from '@/util/map-helper';\nimport { Component, Prop, Vue } from 'vue-property-decorator';\n\ntype MiniTile = Face[];\n\ninterface Boundaries {\n    x: {\n        min: number;\n        max: number;\n    };\n    y: {\n        min: number;\n        max: number;\n    };\n}\n\nconst matchesPos = (pos: Pos, x: number, y: number): boolean => {\n    return pos.x === x && pos.y === y;\n}\n\n@Component\nexport default class MiniMap extends Vue implements IMiniMap {\n    @Prop() faces!: FacePos[];\n    @Prop() player!: FacePos;\n    observer!: ResizeObserver;\n\n    size: Pos = { x: 200, y: 200 };\n    isMounted = false;\n\n    get boundaries(): Boundaries {\n        const { faces } = this;\n        let xMin = Number.MAX_SAFE_INTEGER;\n        let yMin = Number.MAX_SAFE_INTEGER;\n        let xMax = 0;\n        let yMax = 0;\n        for (const face of faces) {\n            xMin = Math.min(xMin, face.x);\n            yMin = Math.min(yMin, face.y);\n            xMax = Math.max(xMax, face.x);\n            yMax = Math.max(yMax, face.y);\n        }\n        return {\n            x: { min: xMin, max: xMax },\n            y: { min: yMin, max: yMax },\n        };\n    }\n\n    get cellSize(): number {\n        const { boundaries, size } = this;\n        const numRows = boundaries.y.max - boundaries.y.min + 1;\n        const numCols = boundaries.x.max - boundaries.x.min + 1;\n        const maxHeight = Math.floor(size.y / numRows);\n        const maxWidth = Math.floor(size.x / numCols);\n\n        return Math.min(maxWidth, maxHeight);\n    }\n\n    get rows(): MiniTile[][] {\n        const { boundaries, faces } = this;\n        const rows: MiniTile[][] = [];\n        for (let y = boundaries.y.min; y <= boundaries.y.max; y++) {\n            const row: MiniTile[] = [];\n            for (let x = boundaries.x.min; x <= boundaries.x.max; x++) {\n                const posFaces = faces.filter((f) => matchesPos(f, x, y));\n                const tile: MiniTile = [];\n                for (const face of allFaces) {\n                    if (posFaces.some((w) => w.facing === face)) tile.push(face);\n                }\n                row.push(tile);\n            }\n            rows.push(row);\n        }\n        return rows;\n    }\n\n    updateSize(): void {\n        const parent = this.$el.parentElement as HTMLElement;\n        const parentComputedStyle = window.getComputedStyle(parent);\n        const xPadding = parseFloat(parentComputedStyle.paddingLeft.replace('px', '')) + parseFloat(parentComputedStyle.paddingRight.replace('px', ''));\n        const yPadding = parseFloat(parentComputedStyle.paddingTop.replace('px', '')) + parseFloat(parentComputedStyle.paddingBottom.replace('px', ''));\n        this.size.x = parent.clientWidth ? (parent.clientWidth - xPadding) : 200;\n        this.size.y = parent.clientHeight ? (parent.clientHeight - yPadding) : this.size.x;\n    }\n\n    mounted(): void {\n        const parent = this.$el.parentElement as HTMLElement;\n        this.updateSize();\n        this.observer = new ResizeObserver(() => this.updateSize());\n        this.observer.observe(parent);\n        this.isMounted = true;\n    }\n\n    beforeDestroy(): void {\n        this.observer?.disconnect();\n    }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MiniMap.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MiniMap.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./MiniMap.vue?vue&type=template&id=32f576c2&scoped=true&\"\nimport script from \"./MiniMap.vue?vue&type=script&lang=ts&\"\nexport * from \"./MiniMap.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./MiniMap.vue?vue&type=style&index=0&id=32f576c2&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"32f576c2\",\n  null\n  \n)\n\nexport default component.exports","import { FacePos, Facing, FacingPos, MapDefinition, Pos, Tile } from \"@/types/Map.types\";\nimport MiniMap from '@/components/Viewer/MiniMap.vue';\n\nexport const canMoveForwards = (map: MapDefinition, x: number, y: number, facing: Facing): boolean => {\n    const tiles = map.tiles;\n    const key = `${x}:${y}`;\n    const tile = tiles[key] || {};\n    return !tile[facing];\n}\n\nexport const rightFrom = (facing: Facing): Facing => {\n  switch(facing) {\n    case 'north':\n      return 'east';\n    case 'east':\n      return 'south';\n    case 'south':\n      return 'west';\n    case 'west':\n      return 'north';\n  }\n}\n\nexport const leftFrom = (facing: Facing): Facing => {\n  switch(facing) {\n    case 'north':\n      return 'west';\n    case 'east':\n      return 'north';\n    case 'south':\n      return 'east';\n    case 'west':\n      return 'south';\n  }\n}\n\n\nexport const goTowards = (facing: Facing): Pos => {\n  switch(facing) {\n    case 'north':\n      return { x: 0, y: -1 };\n    case 'east':\n      return { x: 1, y: 0 };\n    case 'south':\n      return { x: 0, y: 1 };\n    case 'west':\n      return { x: -1, y: 0 };\n  }\n}\n\nconst hasFace = (knownFaces: FacePos[], face: FacePos): boolean => {\n  return knownFaces.some((f) => f.x === face.x && f.y === face.y && f.facing === face.facing);\n}\n\nexport const addToKnownFaces = (player: FacingPos, map: MapDefinition, knownFaces: FacePos[]): FacePos[] => {\n  const playerPosKey = `${player.x}:${player.y}`;\n  const playerTile: Tile = map.tiles[playerPosKey];\n  if (!playerTile) return knownFaces;\n  knownFaces = knownFaces.slice();\n  for (const face of playerTile.faces) {\n    if (!playerTile[face]) continue;\n    const testFace = { x: playerTile.x, y: playerTile.y, facing: face };\n    if (!hasFace(knownFaces, testFace)) knownFaces.push(testFace);\n  }\n  if (!playerTile[player.facing]) {\n    const playerFacingDelta = goTowards(player.facing);\n    const playerFacingPos: Pos = { x: player.x + playerFacingDelta.x, y: player.y + playerFacingDelta.y };\n    const playerFacingKey = `${playerFacingPos.x}:${playerFacingPos.y}`;\n    const playerFacingTile = map.tiles[playerFacingKey];\n    if (playerFacingTile?.floor) {\n      const testFace: FacePos = { x: playerFacingPos.x, y: playerFacingPos.y, facing: 'floor' };\n      if (!hasFace(knownFaces, testFace)) knownFaces.push(testFace);\n    }\n  }\n  return knownFaces;\n};\n\ntype Subscriber = () => void;\nexport interface Emitter {\n  subscribe: (func: Subscriber) => void;\n  emit: () => void;\n}\n\nexport const createEmitter = (): Emitter => {\n  const subscribers: Subscriber[] = [];\n  return {\n    subscribe: (func: Subscriber): void => { subscribers.push(func); },\n    emit: () => subscribers.forEach((sub) => sub()),\n  };\n};\n\nexport interface IGameView extends Vue {\n  map: MapDefinition;\n  x: number;\n  y: number;\n  facing: Facing;\n}\n\nexport interface IMiniMap extends Vue {\n  faces: FacePos[];\n  player: FacePos;\n}\n\ntype GotoPassage = (passageName: string) => void;\n\ntype VariablesFn = () => {\n  tdcFacing: Facing,\n  tdcMinimapKnownFaces: {\n    [mapName: string]: FacePos[];\n  }\n};\n\ntype DestroyFn = () => void;\n\ninterface ControlElements {\n  btnTurnLeft?: HTMLElement;\n  btnTurnRight?: HTMLElement;\n  btnGoForwards?: HTMLElement;\n}\n\nexport const setupControls = (variablesFn: VariablesFn, gotoPassage: GotoPassage, gameView: IGameView, controlElements: ControlElements, emitter?: Emitter): DestroyFn => {\n  let isActionBusy = false;\n  const { map, x, y } = gameView;\n  let { facing } = gameView;\n  gameView.$on('actionComplete', () => isActionBusy = false);\n\n  const updateCanMoveForwards = () => {\n    if(canMoveForwards(map, x, y, facing)) {\n      controlElements.btnGoForwards?.removeAttribute('disabled');\n    } else {\n      controlElements.btnGoForwards?.setAttribute('disabled', 'disabled');\n    }\n  }\n\n  const setFacingTo = (newFacing: Facing) => {\n    if (isActionBusy) return;\n    isActionBusy = true;\n    facing = newFacing;\n    gameView.facing = facing;\n    variablesFn().tdcFacing = facing;\n    updateCanMoveForwards();\n    if (emitter) emitter.emit();\n  };\n\n  const turnLeft = () => {\n    setFacingTo(leftFrom(facing));\n  };\n\n  const turnRight = () => {\n    setFacingTo(rightFrom(facing));\n  };\n\n  const goForwards = (unbindCallback: () => void) => {\n    if (isActionBusy || !canMoveForwards(map, x, y, facing)) {\n      return;\n    }\n    isActionBusy = true;\n    unbindCallback();\n    const move = goTowards(facing);\n    gameView.x = x + move.x;\n    gameView.y = y + move.y;\n    if (emitter) emitter.emit();\n\n    gameView.$on('actionComplete', (action: string) => {\n      if (action === 'go-forwards') {\n        gameView.$destroy();\n        gotoPassage(`tdc-${map.name} (${x + move.x},${y + move.y})`);\n      }\n    })\n  };\n\n  // variable to store goForwardsWrapper\n  let goForwardsFn: () => void; // eslint-disable-line prefer-const\n  // keyListener\n  const keyListener = (e: KeyboardEvent): void => {\n    if (e.key === 'a') turnLeft();\n    else if (e.key === 'w') goForwardsFn();\n    else if (e.key === 'd') turnRight();\n  }\n  // Unbind fn\n  const unbindFn = () => {\n    controlElements.btnTurnLeft?.removeEventListener('click', turnLeft);\n    controlElements.btnTurnRight?.removeEventListener('click', turnRight);\n    controlElements.btnGoForwards?.removeEventListener('click', goForwardsFn);\n    document.body.removeEventListener('keydown', keyListener);\n  }\n  goForwardsFn = () => goForwards(unbindFn);\n\n  // Bind actions\n  controlElements.btnTurnLeft?.addEventListener('click', turnLeft);\n  controlElements.btnTurnRight?.addEventListener('click', turnRight);\n  controlElements.btnGoForwards?.addEventListener('click', goForwardsFn);\n  document.body.addEventListener('keydown', keyListener);\n  updateCanMoveForwards();\n\n  return () => {\n    unbindFn();\n    gameView.$destroy();\n  }\n};\n\nexport const setupMinimap = (variablesFn: VariablesFn, gameView: IGameView, container: HTMLElement, emitter?: Emitter): IMiniMap => {\n  const map = gameView.map;\n  // Initialize currently known faces\n  let player = { x: gameView.x, y: gameView.y, facing: gameView.facing };\n  const tdcKnownFaces = variablesFn().tdcMinimapKnownFaces || {};\n  if (!tdcKnownFaces[map.name]) tdcKnownFaces[map.name] = [];\n  let knownFaces: FacePos[] = tdcKnownFaces[map.name];\n  // Reusable method of saving known faces\n  const saveKnownFaces = () => {\n    tdcKnownFaces[map.name] = knownFaces;\n    variablesFn().tdcMinimapKnownFaces = tdcKnownFaces;\n  }\n  // update known faces based on current player position\n  knownFaces = addToKnownFaces(player, map, knownFaces);\n  saveKnownFaces();\n\n  // Initialize minimap view\n  const target = document.createElement('div');\n  container.appendChild(target);\n  const minimap = new MiniMap({ propsData: { faces: knownFaces, player }}).$mount(target) as IMiniMap;\n\n  // When something changes (player moves or turns), update the minimap or stored data\n  emitter?.subscribe(() => {\n    player = { x: gameView.x, y: gameView.y, facing: gameView.facing };\n    minimap.player = player;\n    knownFaces = addToKnownFaces(player, map, knownFaces);\n    minimap.faces = knownFaces;\n    saveKnownFaces();\n  });\n\n  return minimap;\n}","var render = function () {\nvar _obj;\nvar _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"viewport\"},[_c('div',{staticClass:\"tilt\"},[_c('div',{staticClass:\"player\",class:( _obj = {}, _obj[(\"facing-\" + _vm.facing)] = true, _obj['action-transition'] = _vm.action, _obj['transition-' + _vm.action] = _vm.action, _obj ),style:((\"transform: rotateZ(\" + _vm.angle + \"deg);\")),on:{\"transitionend\":function($event){return _vm.onTransitionEnd()}}},[_c('div',{staticClass:\"map\"},_vm._l((_vm.viewMap),function(row,r){return _c('div',{key:r,staticClass:\"row\"},_vm._l((row),function(tile,c){return _c('div',{key:(r + \",\" + c),staticClass:\"tile\"},[_vm._l((tile.faces),function(face){return [_c('div',{key:(\"viewer_\" + r + \",\" + c + \",\" + face),class:(\"face \" + face + \" texture__\" + (tile[face]))})]})],2)}),0)}),0)])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { MapDefinition } from \"@/types/Map.types\";\nimport { Facing, Row } from \"@/types/Map.types\";\nimport { createEmptyTile } from \"@/util\";\nimport { IGameView, leftFrom, rightFrom } from \"@/util/map-helper\";\nimport { Component, Vue, Watch, Prop } from \"vue-property-decorator\";\n\ntype Action = 'turn-left' | 'turn-right' | 'go-forwards' | null;\nconst directions: Facing[] = ['north', 'east', 'south', 'west'];\n\n@Component\nexport default class GameView extends Vue implements IGameView {\n  @Prop() readonly map!: MapDefinition;\n  @Prop() readonly x!: number;\n  @Prop() readonly y!: number;\n  @Prop() readonly facing!: Facing;\n  \n  action: Action = null;\n  angle = 0;\n\n  get rows(): Row[] {\n    const { map } = this;\n    const rows: Row[] = [];\n    for (let y = 0; y < map.size.y; y++) {\n      const row: Row = [];\n      rows.push(row);\n      for (let x = 0; x < map.size.x; x++) {\n        const key = `${x}:${y}`;\n        const tile = map.tiles[key] || createEmptyTile(x, y);\n        row.push(tile);\n      }\n    }\n    return rows;\n  }\n\n  get viewMap(): Row[] {\n    const facing = this?.facing || 'north';\n    const { action } = this;\n    const rows = this.rows || [];\n    // When moving we change these to only cull stuff afterwards\n    let { x, y } = this;\n    // when rotation, we want to know where we were looking before\n    let wasFacing = facing;\n\n    if (action === 'go-forwards') {\n      if (facing === 'north') y++;\n      if (facing === 'south') y--;\n      if (facing === 'east') x--;\n      if (facing === 'west') x++;\n    } else if (action === 'turn-right') {\n      wasFacing = rightFrom(facing);\n    } else if (action === 'turn-left') {\n      wasFacing = leftFrom(facing);\n    }\n\n    const playerTile = this.map.tiles[`${x}:${y}`];\n\n    return rows.map((row) => {\n      return row.map((tile) => {\n        let shouldHide = true;\n        const facedDirections = [wasFacing, facing];\n        if (facedDirections.includes('north') && tile.y <= y) shouldHide = false;\n        if (facedDirections.includes('south') && tile.y >= y) shouldHide = false;\n        if (facedDirections.includes('east') && tile.x >= x) shouldHide = false;\n        if (facedDirections.includes('west') && tile.x <= x) shouldHide = false;\n\n        if (action !== 'go-forwards' && !shouldHide) {\n          if ((tile.x === x || tile.y === y) && playerTile) {\n            if (playerTile.north && tile.y < y && tile.south) tile = { ...tile, south: '' };\n            if (playerTile.south && tile.y > y && tile.north) tile = { ...tile, north: '' };\n            if (playerTile.west && tile.x < x && tile.east) tile = { ...tile, east: '' };\n            if (playerTile.east && tile.x > x && tile.west) tile = { ...tile, west: '' };\n          }\n        }\n\n        return shouldHide ? createEmptyTile(tile.x, tile.y) : tile;\n      });\n    });\n  }\n\n  mounted(): void {\n    Object.assign(window, { gameview: this });\n    this.updateCSSVariables();\n  }\n\n  getFacingForAngle(angle: number): Facing {\n    const baseAngle = ((angle % 360) + 360) % 360;\n    switch (baseAngle) {\n      case 0: return 'north';\n      case 90: return 'west';\n      case 180: return 'south';\n      case 270: return 'east';\n    }\n    return 'north';\n  }\n\n  @Watch('facing', { immediate: true })\n  updateAngle(newFacing: Facing, oldFacing: Facing): void {\n    const newIndex = directions.indexOf(newFacing);\n    if (oldFacing) {\n      const oldIndex = directions.indexOf(oldFacing);\n      if (Math.abs(oldIndex - newIndex) === 1) {\n        if (newIndex > oldIndex) {\n          return this.turnLeft();\n        } else {\n          return this.turnRight();\n        }\n      } else {\n        if (newFacing === 'north' && oldFacing === 'west') {\n          return this.turnLeft();\n        } else if (newFacing === 'west' && oldFacing === 'north') {\n          return this.turnRight();\n        }\n      }\n    }\n    // Fallback just in case\n    this.angle = 360 - (newIndex * 90);\n  }\n\n  turnLeft(): void {\n    this.action = 'turn-left';\n    this.angle -= 90;\n  }\n\n  turnRight(): void {\n    this.action = 'turn-right';\n    this.angle += 90;\n  }\n\n  @Watch('action')\n  emitActionComplete(newAction: Action, oldAction: Action): void {\n    if (newAction === null && oldAction) {\n      this.$emit('actionComplete', oldAction);\n    }\n  }\n\n  @Watch('x')\n  @Watch('y')\n  setForwardsAction(): void {\n    this.action = 'go-forwards';\n  }\n\n  @Watch('x')\n  @Watch('y')\n  updateCSSVariables(): void {\n    if (!this.$el) return;\n    (this.$el as HTMLElement).style.setProperty('--viewportXOffset', this.x.toString());\n    (this.$el as HTMLElement).style.setProperty('--viewportYOffset', this.y.toString());\n  }\n\n  onTransitionEnd(): void {\n    this.action = null;\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GameView.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GameView.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./GameView.vue?vue&type=template&id=20e00c05&scoped=true&\"\nimport script from \"./GameView.vue?vue&type=script&lang=ts&\"\nexport * from \"./GameView.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./GameView.vue?vue&type=style&index=0&id=20e00c05&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"20e00c05\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"controls\"},[_c('button',{staticClass:\"turn-left\",on:{\"click\":function($event){return _vm.$emit('turnLeft')}}}),_c('button',{staticClass:\"go-forwards\",attrs:{\"disabled\":!_vm.canMoveForwards},on:{\"click\":function($event){return _vm.$emit('goForwards')}}}),_c('button',{staticClass:\"turn-right\",on:{\"click\":function($event){return _vm.$emit('turnRight')}}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop } from \"vue-property-decorator\";\n\n\n@Component\nexport default class Controls extends Vue {\n  @Prop() canMoveForwards!: boolean;\n  keyboardListener!: (e: KeyboardEvent) => void;\n\n  created(): void {\n    this.keyboardListener = (e: KeyboardEvent) => {\n      if (e.key === 'w' && this.canMoveForwards) return this.$emit('goForwards');\n      if (e.key === 'a') return this.$emit('turnLeft');\n      if (e.key === 'd') return this.$emit('turnRight');\n    };\n    document.body.addEventListener('keydown', this.keyboardListener);\n  }\n\n  beforeDestroy(): void {\n    document.body.removeEventListener('keydown', this.keyboardListener);\n  }\n\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Controls.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Controls.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Controls.vue?vue&type=template&id=2f10f450&scoped=true&\"\nimport script from \"./Controls.vue?vue&type=script&lang=ts&\"\nexport * from \"./Controls.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Controls.vue?vue&type=style&index=0&id=2f10f450&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2f10f450\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Watch, InjectReactive } from \"vue-property-decorator\";\n\nimport { FacePos, MapDefinition, ProjectDefintion } from \"@/types/Map.types\";\nimport { Facing } from \"@/types/Map.types\";\nimport { addToKnownFaces, canMoveForwards, goTowards, leftFrom, rightFrom } from '@/util/map-helper';\n\nimport GameView from './GameView.vue';\nimport Controls from './Controls.vue';\nimport MiniMap from './MiniMap.vue';\n\n@Component({\n  components: {\n    GameView,\n    Controls,\n    MiniMap,\n  },\n})\nexport default class Preview extends Vue {\n  @InjectReactive() project!: ProjectDefintion;\n  @InjectReactive() selectedMap!: string;\n\n  facing: Facing = 'north';\n  x = 0;\n  y = 0;\n  viewportSize = 800;\n  isActionActive = false;\n  updateSize!: () => void;\n  knownFaces: FacePos[] = [];\n\n  get map(): MapDefinition {\n    const { project, selectedMap } = this;\n    return project.maps.find((map) => map.name === selectedMap) || project.maps[0];\n  }\n\n  get canMoveForwards(): boolean {\n    return canMoveForwards(this.map, this.x, this.y, this.facing);\n  }\n\n  @Watch('x')\n  @Watch('y')\n  @Watch('facing', { immediate: true })\n  updateKnownTiles(): void {\n    this.knownFaces = addToKnownFaces({ x: this.x, y: this.y, facing: this.facing }, this.map, this.knownFaces);\n  }\n\n  mounted(): void {\n    this.updateSize = () => { this.viewportSize = Math.min(800, window.innerHeight - 160); };\n    this.updateSize();\n    window.addEventListener('resize', this.updateSize);\n  }\n\n  beforeDestroy(): void {\n    window.removeEventListener('resize', this.updateSize);\n  }\n\n  @Watch('map.start', { immediate: true, deep: true })\n  initStartingPosition(): void {\n    const { start } = this.map\n    this.x = start.x;\n    this.y = start.y;\n    this.facing = start.facing;\n  }\n\n  onActionComplete(): void {\n    this.isActionActive = false;\n  }\n\n  turnRight(): void {\n    if (this.isActionActive) return;\n    this.isActionActive = true;\n    this.facing = rightFrom(this.facing);\n  }\n\n  turnLeft(): void {\n    if (this.isActionActive) return;\n    this.isActionActive = true;\n    this.facing = leftFrom(this.facing);\n  }\n\n  goForwards(): void {\n    if (this.isActionActive || !canMoveForwards(this.map, this.x, this.y, this.facing)) {\n      return;\n    }\n    this.isActionActive = true;\n    const move = goTowards(this.facing);\n    this.x += move.x;\n    this.y += move.y;\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Preview.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Preview.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Preview.vue?vue&type=template&id=3c08abb3&scoped=true&\"\nimport script from \"./Preview.vue?vue&type=script&lang=ts&\"\nexport * from \"./Preview.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Preview.vue?vue&type=style&index=0&id=3c08abb3&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3c08abb3\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"overview\"},[_c('div',{staticClass:\"overview-title\"},[_vm._v(\"Project Manager\")]),_c('div',{staticClass:\"overview-list\"},[(!_vm.projects.length)?_c('p',[_vm._v(\"No saved projects\")]):_vm._l((_vm.projects),function(project){return _c('button',{key:(\"pm_project_\" + (project.guid)),staticClass:\"project\",class:{ active: _vm.projectModel.toLowerCase() === project.name.toLowerCase() },domProps:{\"textContent\":_vm._s(project.name)},on:{\"click\":function($event){_vm.projectModel = project.name},\"dblclick\":function($event){_vm.projectName = project.name; _vm.openProject();}}})})],2),_c('div',{staticClass:\"overview-input\"},[_c('label',[_vm._v(\" Project name: \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.projectModel),expression:\"projectModel\"}],attrs:{\"placeholder\":\"Enter project name\"},domProps:{\"value\":(_vm.projectModel)},on:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }$event.preventDefault();_vm.isExistingProject ? _vm.openProject() : _vm.createNewProject()},\"input\":function($event){if($event.target.composing){ return; }_vm.projectModel=$event.target.value}}})])]),_c('div',{staticClass:\"overview-actions\"},[(!_vm.projectModel)?_c('span',{staticClass:\"message\"},[_vm._v(\"Select a project or enter a name\")]):[(_vm.isExistingProject)?_c('button',{on:{\"click\":function($event){return _vm.openProject()}}},[_vm._v(\"Open project\")]):_c('button',{on:{\"click\":function($event){return _vm.createNewProject()}}},[_vm._v(\"Create new project\")])]],2)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { Texture } from \"@/types/Texture.types\";\n\nexport const DEFAULT_TEXTURES: Texture[] = [\n    { name: 'floor1', properties: [{ name: 'background-image', value: `url('./textures/floor_01.png')` }, { name: 'background-size', value: `contain` }, { name: 'background-repeat', value: `repeat` }]},\n    { name: 'ground', properties: [{ name: 'background-image', value: `url('./textures/GroundF.png')` }, { name: 'background-size', value: `contain` }, { name: 'background-repeat', value: `repeat` }]},\n    { name: 'wall1', properties: [{ name: 'background-image', value: `url('./textures/brks_2.png')` }, { name: 'background-size', value: `contain` }, { name: 'background-repeat', value: `repeat` }]},\n    { name: 'wall2', properties: [{ name: 'background-image', value: `url('./textures/brks_1.png')` }, { name: 'background-size', value: `contain` }, { name: 'background-repeat', value: `repeat` }]},\n    { name: 'wall3', properties: [{ name: 'background-image', value: `url('./textures/bkred_1.png')` }, { name: 'background-size', value: `contain` }, { name: 'background-repeat', value: `repeat` }]},\n    { name: 'wall4', properties: [{ name: 'background-image', value: `url('./textures/brks_8.png')` }, { name: 'background-size', value: `contain` }, { name: 'background-repeat', value: `repeat` }]},\n    { name: 'metal', properties: [{ name: 'background-image', value: `url('./textures/wall52_1.png')` }, { name: 'background-size', value: `contain` }, { name: 'background-repeat', value: `repeat` }]},\n    { name: 'ph1', properties: [{ name: 'background-color', value: '#f00' }] },\n    { name: 'ph2', properties: [{ name: 'background-color', value: '#0f0' }] },\n    { name: 'ph3', properties: [{ name: 'background-color', value: '#00f' }] },\n    { name: 'ph4', properties: [{ name: 'background-color', value: '#ff0' }] },\n    { name: 'ph5', properties: [{ name: 'background-color', value: '#f0f' }] },\n    { name: 'ph6', properties: [{ name: 'background-color', value: '#0ff' }] },\n    { name: 'ph7', properties: [{ name: 'background-color', value: '#999' }] },    \n];","import { MapDefinition } from \"@/types/Map.types\";\n\nexport const DEFAULT_MAP_FACTORY: () => MapDefinition = () => ({\n    name: '',\n    size: { x: 7, y: 7 },\n    start: { x: 3, y: 3, facing: 'north' },\n    tiles: {},\n});","import localForage from 'localforage';\nexport type LocalForage = typeof localForage;\nexport const store: LocalForage = localForage.createInstance({\n  storeName: 'tdc-store',\n  description: 'Datastore for Twine Dungeon Crawler',\n});\n\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from 'vue-property-decorator';\n\nimport { DEFAULT_TEXTURES } from '@/data/defaultTextures';\nimport { DEFAULT_MAP_FACTORY } from '@/data/defaultMap';\nimport { Facing, ProjectDefintion } from '@/types/Map.types';\nimport { ProjectListItem } from '@/types/store.types';\nimport { store } from '@/store';\n\n@Component\nexport default class ProjectManager extends Vue {\n  projects: ProjectListItem[] = [];\n  projectModel = '';\n\n  get isExistingProject(): boolean {\n      const { projects, projectModel } = this;\n      return projects.map((p) => p.name.toLowerCase()).includes(projectModel.toLowerCase());\n  }\n\n  createNewProject(): void {\n    const project: ProjectDefintion = {\n      guid: Math.floor(Math.random() * Number.MAX_SAFE_INTEGER).toString(36),\n      name: this.projectModel,\n      textures: [...DEFAULT_TEXTURES],\n      maps: [{\n        ...DEFAULT_MAP_FACTORY(),\n        name: 'map 1',\n      }],\n      hasUnsavedChanges: false,\n    };\n    this.$emit('setProject', project);\n  }\n\n  async openProject(): Promise<void> {\n      const guid = this.projects.find((item) => item.name.toLowerCase() === this.projectModel.toLowerCase())?.guid;\n      if (!guid) return alert('Error loading project!');\n      const project = await store.getItem<ProjectDefintion>(`project__${guid}`);\n      if (!project) return alert('Error loading project!');\n      for (const map of project.maps) {\n          const direction: Facing = (map.start as any)['direction']; // eslint-disable-line @typescript-eslint/no-explicit-any\n          if (!map.start.facing && direction) {\n              map.start.facing = direction;\n          }\n      }\n      this.$emit('setProject', project);\n  }\n\n  async created(): Promise<void> {\n      this.projects = await store.getItem<ProjectListItem[]>('project-list') || [];\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProjectManager.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProjectManager.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ProjectManager.vue?vue&type=template&id=5fd011e4&scoped=true&\"\nimport script from \"./ProjectManager.vue?vue&type=script&lang=ts&\"\nexport * from \"./ProjectManager.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./ProjectManager.vue?vue&type=style&index=0&id=5fd011e4&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5fd011e4\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tabs\"},[_vm._l((_vm.maps),function(map){return _c('button',{key:(\"select-map__\" + map),staticClass:\"tab\",class:{ active: map === _vm.selectedMap },on:{\"click\":function($event){return _vm.selectMap(map)}}},[_vm._v(\" \"+_vm._s(map)+\" \"),(_vm.canEdit)?_c('div',{staticClass:\"actions\"},[_c('button',{staticClass:\"edit\",on:{\"click\":function($event){return _vm.renameMap(map)}}},[_vm._v(\"Edit\")]),_c('button',{staticClass:\"delete\",on:{\"click\":function($event){return _vm.removeMap(map)}}},[_vm._v(\"Delete\")])]):_vm._e()])}),(_vm.canEdit)?_c('label',{staticClass:\"add-map\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newMapName),expression:\"newMapName\"}],domProps:{\"value\":(_vm.newMapName)},on:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }$event.preventDefault();return _vm.addMap()},\"input\":function($event){if($event.target.composing){ return; }_vm.newMapName=$event.target.value}}}),_c('button',{attrs:{\"disabled\":!_vm.validMapName},on:{\"click\":function($event){$event.preventDefault();return _vm.addMap()}}},[_vm._v(\"+\")])]):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, InjectReactive, Prop } from \"vue-property-decorator\";\nimport { MapDefinition, ProjectDefintion } from \"@/types/Map.types\";\nimport { DEFAULT_MAP_FACTORY } from '@/data/defaultMap';\nimport { Dialogs } from \"../Dialog/dialogs\";\n\n@Component\nexport default class MapPicker extends Vue {\n  @InjectReactive() project!: ProjectDefintion;\n  @InjectReactive() selectedMap!: string;\n  newMapName = \"\";\n\n  @Prop() state!: string;\n\n  get maps(): string[] {\n    return this.project.maps.map((map) => map.name);\n  }\n\n  get validMapName(): boolean {\n    return this.isValidMapName(this.newMapName)\n  }\n\n  get canEdit(): boolean {\n    return this.state === 'editor';\n  }\n\n  isValidMapName(mapName: string): boolean {\n    if (!mapName) return false;\n    const currentNames = this.maps.map((name) => name.toLowerCase());\n    return !currentNames.includes(mapName.toLowerCase().trim());\n  }\n\n  selectMap(map: string): void {\n    this.$emit('setMap', map);\n  }\n\n  addMap(): void {\n      if (!this.validMapName) {\n        Dialogs.alert('Error', 'This name is either invalid or already in use');\n        return;\n      }\n      this.project.maps.push({\n          ...DEFAULT_MAP_FACTORY(),\n          name: this.newMapName.trim(),\n      });\n      this.newMapName = '';\n  }\n\n  async renameMap(oldName: string): Promise<void> {\n    const newName = await Dialogs.prompt('Rename map', `Enter a new name for \"${oldName}\"`, oldName);\n    if (newName === oldName) return;\n    if (newName) {\n      const isSameish = newName.trim().toLowerCase() === oldName.trim().toLowerCase();\n      if (!this.isValidMapName(newName) && !isSameish) {\n        Dialogs.alert('Error', 'This name is either invalid or already in use');\n      } else {\n        const sanitizedName = newName.trim()\n        const map = this.project.maps.find((map) => map.name === oldName) as MapDefinition;\n        map.name = sanitizedName;\n        if (this.selectedMap === oldName) {\n          this.selectMap(sanitizedName)\n        }\n      }\n    }\n  }\n\n  async removeMap(mapName: string): Promise<void> {\n    if (await Dialogs.confirm('Remove map', 'Are you sure you want to delete this map?', ['No', '!Yes']) === 'Yes') {\n      if (this.maps.length <= 1) {\n        const newMapName = this.generateMapName();\n        this.project.maps.push({\n            ...DEFAULT_MAP_FACTORY(),\n            name: newMapName.trim(),\n        });        \n      }\n      this.selectMap(this.maps.find((m) => m !== mapName) as string);\n      this.project.maps = this.project.maps.filter((map) => map.name !== mapName);\n    }\n  }\n\n  generateMapName(): string {\n    for (let i = 1;; i++) {\n      if (!this.maps.includes(`Map ${i}`)) return `Map ${i}`;\n    }\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapPicker.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapPicker.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./MapPicker.vue?vue&type=template&id=5a5bbb81&scoped=true&\"\nimport script from \"./MapPicker.vue?vue&type=script&lang=ts&\"\nexport * from \"./MapPicker.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./MapPicker.vue?vue&type=style&index=0&id=5a5bbb81&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5a5bbb81\",\n  null\n  \n)\n\nexport default component.exports","import { ProjectDefintion } from \"@/types/Map.types\";\nimport { Texture } from \"@/types/Texture.types\";\n\nexport const getUsedTextures = (project: ProjectDefintion): Texture[] => {\n    return project.textures.filter((texture) => {\n        return project.maps.some((map) => {\n            return Object.values(map.tiles).some((tile) => [tile.north, tile.east, tile.south, tile.west, tile.floor].includes(texture.name));\n        });\n    });\n};\n\ninterface ImageAndBlob {\n    url: string;\n    filename: string;\n    blob: Blob;\n}\n\nexport const getTextureBlobsAndFiles  = async (css: string): Promise<ImageAndBlob[]> => {\n    const lines = css.split(/[;{}]/);\n    const imageUrls = lines.map((line) => {\n        let remainder = line.split('url(')[1]?.trim();\n        if (!remainder) return '';\n\n        remainder = remainder.split(')')[0].trim();\n        remainder = remainder.replace(/['\"]/g, '');\n        return remainder;\n\n    }).filter(Boolean);\n\n    const promises = imageUrls.map(async (url): Promise<ImageAndBlob> => {\n        const image = await fetch(url).then((r) => r.blob());\n        return {\n            blob: image,\n            filename: url.split('/').pop() as string,\n            url: url,\n        };\n    });\n\n    const settledPromises: PromiseSettledResult<ImageAndBlob>[] = await Promise.allSettled(promises);\n\n    return settledPromises\n        .filter((p) => p.status === 'fulfilled')\n        .map((p) => (p as PromiseFulfilledResult<ImageAndBlob>).value);\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, ProvideReactive, Vue, Watch } from 'vue-property-decorator';\n\nimport { MapDefinition, ProjectDefintion, Tile } from '@/types/Map.types';\n\nimport Editor from '@/components/Editor/Editor.vue';\nimport Preview from '@/components/Viewer/Preview.vue';\nimport ProjectManager from '@/components/ProjectManager/ProjectManager.vue';\nimport MapPicker from '@/components/MapPicker/MapPicker.vue';\nimport { store } from './store';\nimport { ProjectListItem } from './types/store.types';\nimport { getUsedTextures, getTextureBlobsAndFiles } from '@/util/texture-helper';\nimport { Texture } from './types/Texture.types';\n\ntype AppState = 'editor' | 'preview' | 'project-manager';\ninterface MapsData {\n  [name: string]: MapDefinition;\n}\n\n@Component({\n  components: {\n    Editor,\n    Preview,\n    ProjectManager,\n    MapPicker,\n  },\n})\nexport default class App extends Vue {\n  state: AppState = 'project-manager';\n  styleElement!: HTMLStyleElement;\n  @ProvideReactive() project: ProjectDefintion | null = null;\n  @ProvideReactive() selectedMap = '';\n\n  get textureCSS(): string {\n    return this.project ? this.generateTextureCSS(this.project.textures) : '';\n  }\n\n  @Watch('project', { immediate: true })\n  initDefaultMap(): void {\n    this.selectedMap = this.project?.maps[0].name || '';\n  }\n\n  generateTextureCSS(textures: Texture[]): string {\n    return textures.map((texture): string => {\n      const cssBody = texture.properties.map((property) => {\n        const { name, value } = property;\n        return `  ${name}: ${value};`\n      }).join('\\n');\n      return `.texture__${texture.name} {\\n${cssBody}\\n}`;\n    }).join('\\n\\n') || '';\n  }\n\n  initStyleTarget(): void {\n    const oldStylElements = Array.from(document.head.querySelectorAll(`style[data-tdc]`));\n    while (oldStylElements.length) {\n      oldStylElements.pop()?.remove();\n    }\n\n    this.styleElement = document.createElement('style');\n    this.styleElement.setAttribute('data-tdc', '');\n    document.head.appendChild(this.styleElement);\n  }\n\n  setMap(mapname: string): void {\n    this.selectedMap = mapname;\n  }\n\n  setProject(project: ProjectDefintion): void {\n    this.project = project;\n    this.state = 'editor';\n  }\n\n  @Watch('textureCSS')\n  updateDomTextureCSS(): void {\n    this.styleElement.innerHTML = this.textureCSS;\n  }\n\n  async saveProject(): Promise<void> {\n    if (!this.project) return;\n    const projectnames = await store.getItem<ProjectListItem[]>('project-list') || [];\n    const filtered = projectnames.filter((pn) => pn.guid !== this.project?.guid);\n    this.project.hasUnsavedChanges = false;\n    store.setItem(`project-list`, [{ name: this.project.name, guid: this.project.guid }, ...filtered]);\n    store.setItem(`project__${this.project.guid}`, this.project);\n  }\n\n  async downloadFiles(): Promise<void> {\n    if (!this.project) return;\n\n    // create zip\n    const JSZip = (await import('jszip')).default;\n    const zip = new JSZip();\n\n    // maps\n    const maps: MapsData = this.project.maps.reduce((acc: MapsData, cur: MapDefinition): MapsData => ({ ...acc, [cur.name]: cur }), {});\n    const setupScript = `setup.tdc = { viewportSize: '800px', maps: ${JSON.stringify(maps)} };\\n`;\n    zip.file('tdc/tdc-setup.js', setupScript);\n\n    // textures\n    const textures = getUsedTextures(this.project);\n    let textureCSS = this.generateTextureCSS(textures);\n    const imagesAndBlobs = await getTextureBlobsAndFiles(textureCSS);\n    for (let imageAndBlob of imagesAndBlobs) {\n      let filepath = `textures/${imageAndBlob.filename}`;\n      if (imageAndBlob.url.includes(filepath)) {\n        filepath = filepath.replace('textures/', `textures/${Math.floor(Math.random() * Number.MAX_SAFE_INTEGER).toString(36)}_`);\n      }\n      zip.file(filepath, imageAndBlob.blob);\n      while (textureCSS.includes(imageAndBlob.url)) {\n        textureCSS = textureCSS.replace(imageAndBlob.url, filepath);\n      }\n    }\n    zip.file('tdc/tdc-textures.css', textureCSS);\n    zip.file('tdc/tdc-nofade.css', `.passage.tdc { transition-property: none; }`);\n\n    // viewer plugin\n    const viewerResponse = await fetch('//raw.githubusercontent.com/Goctionni/dungeoncrawler/viewerjs/tdc-plugin.js');\n    const viewerjs = await viewerResponse.text();\n    zip.file('tdc/tdc-plugin.js', viewerjs);\n\n    // TDC macro\n    const tdcMacroResponse = await fetch('//raw.githubusercontent.com/Goctionni/dungeoncrawler/viewerjs/tdc-macro.js');\n    const tdcMacroJs = await tdcMacroResponse.text();\n    zip.file('tdc/tdc-macro.js', tdcMacroJs);\n\n    // TDC template\n    const tdcTemplateResponse = await fetch('//raw.githubusercontent.com/Goctionni/dungeoncrawler/viewerjs/tdc-template.tw');\n    const tdcTemplateJs = await tdcTemplateResponse.text();\n    zip.file('tdc/tdc-template.tw', tdcTemplateJs);\n\n    // passages\n    for(const map of this.project.maps) {\n      const passages = Object.values(map.tiles).map((tile: Tile): string => {\n        return `:: tdc-${map.name} (${tile.x},${tile.y}) [tdc]\\n\\n<<DungeonCrawler '${map.name}' ${tile.x} ${tile.y} $tdcFacing>><</DungeonCrawler>>\\n`;\n      });\n      const mapInitPassage = `:: tdc-${map.name} [tdc]\\n\\n<<DungeonCrawler '${map.name}'>><</DungeonCrawler>>\\n` +\n        `<<done>><<replace \".tdc-description\">>You enter the dungeon... (You can use this to place text into the sample UI)<</replace>><</done>>`;\n      zip.file(`tdc-passages/${map.name}.tw`, [ mapInitPassage, ...passages].join('\\n\\n'));\n    }\n\n    // zip the data\n    const zipBlob = await zip.generateAsync({ type: 'blob' });\n\n    // download zip\n    const saveAs = (await import('file-saver')).saveAs;\n    saveAs(zipBlob, `tdc_${this.project.name}.zip`);\n  }\n\n  closeProject(): void {\n    this.project = null;\n    this.state = 'project-manager';\n  }\n\n  created(): void {\n    this.initStyleTarget();\n  }\n}\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--14-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--14-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--14-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--14-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=4e54db80&scoped=true&\"\nimport script from \"./App.vue?vue&type=script&lang=ts&\"\nexport * from \"./App.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\nimport style1 from \"./App.vue?vue&type=style&index=1&id=4e54db80&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4e54db80\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport App from './App.vue'\n\nVue.config.productionTip = false\n\nconst instance = new App().$mount('#app');\nObject.assign(window, { app: instance });\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapPicker.vue?vue&type=style&index=0&id=5a5bbb81&lang=scss&scoped=true&\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=1&id=4e54db80&lang=scss&scoped=true&\""],"sourceRoot":""}